<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>

        let expconduite=[{"id":1,"heure_debut":"06:50","heure_Arriver":"10:30","km":10,"date":"2023-03-27","id_meteo":1,"id_saison":1,"id_vitesse":1},{"id":2,"heure_debut":"07:00","heure_Arriver":"10:00","km":15,"date":"2023-03-26","id_meteo":2,"id_saison":"2","id_vitesse":2},{"id":3,"heure_debut":"08:30","heure_Arriver":"12:00","km":11,"date":"2023-03-28","id_meteo":3,"id_saison":"3","id_vitesse":3}];
        console.log(expconduite);
        let expcond=[{"id":1,"heure_debut":"06:50","heure_Arriver":"10:30","km":10,"date":"2023-03-27"}];
        console.log(expcond);
        let meteo=[{"id_meteo":1,"meteo":"soleil"},{"id_meteo":2,"meteo":"neige"},{"id_meteo":3,"meteo":"pluie"},{"id_meteo":4,"meteo":"nuageux"}];
        console.log(meteo);
        let vitesse=[{"id_vitesse":1,"vitesseConduite":"Elever"},{"id_vitesse":2,"vitesseConduite":"Lente"},{"id_vitesse":3,"vitesseConduite":"Normal"}];
        console.log(vitesse);
        let saison=[{"id_saison":"1","saison":"Printemps"},{"id_saison":"2","saison":"Ete"},{"id_saison":3,"saison":"automne"},{"id_saison":4,"saison":"hiver"}];
        console.log(saison);


      let listeExps= new Array();
      let datastring=localStorage.getItem('listeExps');
      if(datastring!=null){ 
        listeExps=JSON.parse(datastring);
      }

        document.onreadystatechange=function()
        {
          if(document.readyState=="complete")
          {
            dynamicwritting();
          }
        }
        function dynamicwritting()
        {
          
             let CodeHTML= "<table><head><tr><th>Heure de depart</th><th>Heure d'arriver</th><th>Date</th><th>Kilométrage</th><th>Météo</th><th>Saison</th><th>Vitesse</th></tr></head><tbody>";
              
             listeExps.forEach(function(item,index){
              let lidmeteo=item.id_meteo;
              let meteorecherchee=meteo.find(meteoElement => meteoElement.id_meteo==lidmeteo).meteo;
              
              let lidvitesse=item.id_vitesse;
              let vitesserecherchee= vitesse.find(vitesseElement=> vitesseElement.id_vitesse==lidvitesse).vitesseConduite;

              let lidsaison= item.id_saison;
              let saisonrecherchee= saison.find(saisonElement => saisonElement.id_saison==lidsaison).saison;
              
              CodeHTML += "<tr>";
                CodeHTML += `<td>${item.heure_debut}</td>`;
                CodeHTML += `<td>${item.heure_arriver}</td>`;
                CodeHTML += `<td>${item.Date}</td>`;
                CodeHTML += `<td>${item.kilometrage}</td>`;
                CodeHTML += `<td>${meteorecherchee}</td>`;
                CodeHTML += `<td>${saisonrecherchee}</td>`;
                CodeHTML += `<td>${vitesserecherchee}</td>`;
                CodeHTML += "</tr>";
            });

            CodeHTML+="</table></tbody>";
            document.getElementById("main").insertAdjacentHTML("afterbegin",CodeHTML);
            
        }
    </script>
     <style>
      table{table-layout: auto;width : 600px;border: 1px solid black;
      border-collapse: collapse;}
      td{
          border: 1px solid black;
      }
    </style>
</head>
<body>
    <section id="main"></section>
</body>
</html>